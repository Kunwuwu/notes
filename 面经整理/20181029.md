# [2019秋招C++/后端 今日头条等公司面经 ](https://www.nowcoder.com/discuss/137145 )

## 头条（c++后端）

### 1.TIME_WAIT作用

- 可靠地实现TCP全双工连接的终止（确保被动关闭方的重传FIN包能被接收）；

- 允许老的重复分节在网络中的消逝（避免之前废弃的数据影响现在新建的连接，2MSL时间内不能新建连接）：

  我们假设ip1:port1和ip2:port2 之间有一个TCP连接。我们关闭了这个链接，过一段时间后在相同IP和端口之间建立了另一个连接。TCP必须防止来自之前那个连接的老的重复分组在新连接上出现。为了做到这一点，TCP将不复用处于TIME_WAIT状态的连接。2MSL的时间足以让某个方向上的分组存活MSL秒后被丢弃，另一个方向上的应答也最多存活MSL秒后被丢弃。

### 2.Nagle算法

Nagle算法的核心思想是只允许网络中有一个小分组被发送，其他小分组会被放到缓冲区，组成一个大分组后，等待第一个小分组的应答后再发送。（任意时刻，只能存在一个未被确认的小段，未确认：发出去了未收到ACK）

- 如果发送数据长度大于MSS则发送；
- 如果发送包中含有FIN，则允许发送；
- 如果设置了TCP_NODELAY，允许发送；
- 如果确认包迟迟未收到，发生了超时的话，允许发送。

Nagle算法的目的是拥塞控制，避免网络中存在过多的包，且这些包很多是小包，会浪费网络资源。

### 4.do{} while(0) 语句的用法

学到了。[do{...}while(0)的妙用](https://www.jianshu.com/p/99efda8dfec9 )

- 可以帮助定义一些复杂的宏定义避免错误；
- 代替goto语句；

### 5.连连看的时间复杂度

O(n^2)？

### 6.二面面试官，把整个TCP过程问了一遍，从发送到接受，缓存区，窗口和可能遇到的各种情况分析?

TCP头部、滑动窗口、拥塞控制（慢启动、拥塞避免、Nagle算法）、三次握手，四次挥手、为什么是三次和四次？

### 7.进程通信 

有名管道、无名管道、共享内存、信号量、socket、消息队列。

### 8.fork，读时共享，写时复制？

如题。

### 9. 微信网页版要是你怎么实现？

一脸懵逼？聊天室吗？

